---
previous: "[[<% moment(tp.file.title, 'YYYY').subtract(1, 'y').format('YYYY') %>]]"
---

# 睡眠時間

```dataviewjs
window.pages = dv.pages(`"${dv.current().file.folder}"`).where(p => p.file.name.match(new RegExp(`${dv.current().file.name.split('-')[0]}-\\d{2}-\\d{2}`))).sort(p => p.file.name);
```

```dataviewjs
const times = [];
for (let page of window.pages) {
    times.push(page['睡眠']);
}

// 平均睡眠時間計算
const avgTimes = times.filter(t => !isNaN(t) && t !== null);
const avgSleep = avgTimes.length > 0 ? (avgTimes.reduce((sum, t) => sum + t, 0) / avgTimes.length) : 0;
dv.paragraph(`平均: ${avgSleep.toFixed(2)}`);

const chartData = {
    type: 'line',
    data: {
        labels: window.pages.file.name.array(),
        datasets: [{
            label: '睡眠時間',
            data: times,
            pointBackgroundColor: '#6c40d6',
            borderColor: '#6c40d65c',
            tension: 0.4,
            spanGaps: true,
        }],
    },
    options: {
        scales: {
            y: {
                type: 'linear',
                min: 2,
                max: 12,
            }
        }
    }
}

window.renderChart(chartData, this.container);
```

# 筋トレ
![[筋トレ記録 <% tp.file.title %>]]
