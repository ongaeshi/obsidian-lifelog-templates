---
<%*
const current = moment(tp.file.title, "GGGG-[W]WW");
const prev = current.clone().subtract(1, 'weeks').format("GGGG-[W]WW");
const next = current.clone().add(1, 'weeks').format("GGGG-[W]WW");
tR += `previous: "[[${prev}]]"`
%>
---
<%* tR += `<<[[${prev}]] [[${next}]]>>` %>

```dataviewjs
window.pages = dv.pages(`"${dv.current().file.folder}"`).where(p => p.file.name.match(new RegExp(`\\d{4}-\\d{2}-\\d{2}`))).sort(p => p.file.name);
```

### 今週のTODO
- [ ] 

# デイリーノート
```dataviewjs
dv.span(window.pages.map(n => `[[${n.file.name}]]`).join(" ・ "));
```

# 睡眠時間

```dataviewjs
const times = [];
for (let page of window.pages) {
    times.push(page['睡眠']);
}

// 平均睡眠時間計算
const avgTimes = times.filter(t => !isNaN(t) && t !== null);
const avgSleep = avgTimes.length > 0 ? (avgTimes.reduce((sum, t) => sum + t, 0) / avgTimes.length) : 0;
dv.paragraph(`平均: ${avgSleep.toFixed(2)}`);

const chartData = {
    type: 'line',
    data: {
        labels: window.pages.file.name.array(),
        datasets: [{
            label: '睡眠時間',
            data: times,
            pointBackgroundColor: '#6c40d6',
            borderColor: '#6c40d65c',
            tension: 0.4,
            spanGaps: true,
        }],
    },
    options: {
        scales: {
            y: {
                type: 'linear',
                min: 2,
                max: 12,
            }
        }
    }
}

window.renderChart(chartData, this.container);
```
